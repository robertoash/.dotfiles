#!/usr/bin/env bash

if [ "$1" = "--help" ] || [ "$1" = "-h" ]; then
    echo "Usage: chrome_profile <profile> [url...]"
    echo "Launch Chromium with a specific profile"
    echo ""
    echo "Arguments:"
    echo "  profile    Profile name (directory under ~/.config/chromium)"
    echo "  url        Optional URLs to open"
    exit 0
fi

PROFILE=$1
shift  # Remove the profile argument

CHROME_BASE="$HOME/.config/chromium/$PROFILE"

if [ ! -d "$CHROME_BASE" ]; then
    echo "‚ùå Profile '$PROFILE' doesn't exist."
    exit 1
fi

# Add session restore flags for all profiles except "app"
if [ "$PROFILE" != "app" ]; then
    chromium --profile-directory="$PROFILE" --restore-last-session --disable-session-crashed-bubble "$@" &
else
    chromium --profile-directory="$PROFILE" --disable-session-crashed-bubble "$@" &
fi
disown
