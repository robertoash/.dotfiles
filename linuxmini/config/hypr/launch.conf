# Execute your favorite apps at launch

exec-once = dbus-update-activation-environment --systemd --all
exec-once = systemctl --user import-environment HYPRLAND_INSTANCE_SIGNATURE

# Theme
# Override gsettings
exec-once = ~/.config/theme_it/scripts/gtk-overrides.sh
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
# Apps
# Wallpaper manager (handled by systemd service)
exec-once = systemctl --user start hyprpaper.service
# Initialize presence detection status files
exec-once = ~/.config/scripts/hyprland/idle_management/init_presence_status.py

# Tray apps (GUI applications that need to run in user session)
exec-once = [workspace 80 silent] sleep 5 && insync start --qt-qpa-platform=wayland --app-name insync # Insync
exec-once = blueman-applet
exec-once = /usr/bin/kdeconnectd
exec-once = kdeconnect-indicator

# Startup Apps
exec-once = hypr-window-ops launch-apps

## Own scripts
# Initialize Kanata state (smart detection of reboot vs keyboard reconnect)
exec-once = sleep 3 && kanata-tools init

# Start services with a delay to ensure Hyprland is fully initialized
exec-once = sleep 5 && systemctl --user start waybar.service hypridle.service pypr.service clipse.service jellyfin-mpv-shim.service
exec-once = sleep 5 && systemctl --user start keybind-watcher.service
exec-once = sleep 6 && systemctl --user start tibber-price.service in-office-status.service vpn-status.service idle-status.service

# Run in-office-monitor directly (not via systemd) to ensure proper Hyprland environment
exec-once = sleep 5 && ~/.config/scripts/hyprland/idle_management/in_office_monitor.py

# Archive
# Set default browser per app
# Not needed when PC is exclusively personal
# exec-once = ~/.config/scripts/hyprland/default_browser_per_app.py
