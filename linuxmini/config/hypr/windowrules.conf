# Gap math for floating window positioning: gaps_out (20) + border_size (4 normal, 6 pinned)

## Filtering tags
windowrule = tag +floating, match:float 1
windowrule = tag -floating, match:float 0
windowrule = tag +pinned, match:pin 1
windowrule = tag -pinned, match:pin 0
windowrule = tag +focused, match:focus 1
windowrule = tag -focused, match:focus 0
windowrule = tag +unfocused, match:focus 0
windowrule = tag -unfocused, match:focus 1

# Prevent lock when watching fullscreen
windowrule = idle_inhibit fullscreen, match:class .*
# Prevent lock when watching mpv/vlc in fullscreen or when doubled (large-video tag)
windowrule = idle_inhibit fullscreen, match:class .*(mpv|vlc).*
windowrule = idle_inhibit always, match:tag large-video
# Prevent lock when in a meeting (Slack huddles only, not all of Slack)
windowrule = idle_inhibit always, match:title .* - Huddle$
# Prevent apps from hijacking workspace
windowrule = suppress_event maximize, match:class ^Mullvad Browser$
windowrule = suppress_event maximize, match:class ^libreoffice-.*

# Fullscreen windows should be fully opaque
windowrule = opacity 1.0, match:fullscreen 1

# Pinned windows: yellow (focused) / red (unfocused)
windowrule = border_color rgb(ffff00) rgb(ff0000), match:pin 1
windowrule = border_size 6,match:pin 1

# Sneaky windows
windowrule = border_color rgb(ffff00) rgb(d5a6ff), match:tag sneaky

# Noscreenshare for sentitive apps
windowrule = no_screen_share on, match:class ^Mullvad Browser$
windowrule = no_screen_share on, match:class ^secure_shell$

## Picture-in-picture - Browser
windowrule = float on, match:title ^.*Picture.in.picture.*$
windowrule = pin on, match:title ^.*Picture.in.picture.*$
windowrule = size 1228 691, match:title ^.*Picture.in.picture.*$
windowrule = move 26 (monitor_h-window_h-26), match:title ^.*Picture.in.picture.*$
windowrule = keep_aspect_ratio on, match:title ^.*Picture.in.picture.*$

## Picture-in-picture - IPTV
windowrule = float on, match:class ^rofi_xtream$
windowrule = pin on, match:class ^rofi_xtream$
windowrule = size 1228 691, match:class ^rofi_xtream$
windowrule = move 26 (monitor_h-window_h-26), match:class ^rofi_xtream$
windowrule = keep_aspect_ratio on, match:class ^rofi_xtream$

## Picture-in-picture - CLI Stream
windowrule = float on, match:class ^cli_stream$
windowrule = pin on, match:class ^cli_stream$
windowrule = size 1228 691, match:class ^cli_stream$
windowrule = move 26 (monitor_h-window_h-26), match:class ^cli_stream$
windowrule = keep_aspect_ratio on, match:class ^cli_stream$

## Picture-in-picture - Jellyfin-mpv
windowrule = float on, match:class ^jellyfin-mpv$
windowrule = pin on, match:class ^jellyfin-mpv$
windowrule = size 1228 691, match:class ^jellyfin-mpv$
windowrule = move 26 (monitor_h-window_h-26), match:class ^jellyfin-mpv$
windowrule = keep_aspect_ratio on, match:class ^jellyfin-mpv$

## Picture-in-picture - SVT Play
windowrule = float on, match:class ^mpv-svtplay$
windowrule = pin on, match:class ^mpv-svtplay$
windowrule = size 1228 691, match:class ^mpv-svtplay$
windowrule = move 26 (monitor_h-window_h-26), match:class ^mpv-svtplay$
windowrule = keep_aspect_ratio on, match:class ^mpv-svtplay$

## Picture-in-picture - IPTV
windowrule = float on, match:title ^IPTV - .*$
windowrule = pin on, match:title ^IPTV - .*$
windowrule = size 1228 691, match:title ^IPTV - .*$
windowrule = move 26 (monitor_h-window_h-26), match:title ^IPTV - .*$
windowrule = keep_aspect_ratio on, match:title ^IPTV - .*$

## Picture-in-picture - YouTube
windowrule = float on, match:title ^rofi_ytsearch.*$
windowrule = pin on, match:title ^rofi_ytsearch.*$
windowrule = size 1228 691, match:title ^rofi_ytsearch.*$
windowrule = move 26 (monitor_h-window_h-26), match:title ^rofi_ytsearch.*$
windowrule = keep_aspect_ratio on, match:title ^rofi_ytsearch.*$

## TikTok
windowrule = float on, match:class ^.*tiktok.*$
windowrule = pin on, match:title ^.*tiktok.*$
windowrule = size 720 1160, match:title ^.*tiktok.*$
windowrule = move 26 (monitor_h-window_h-26), match:title ^.*tiktok.*$
windowrule = keep_aspect_ratio on, match:title ^.*tiktok.*$

## App-specific window rules
# Libreoffice (prevent fullscreen)
windowrule = tile on, match:class ^libreoffice-.*$
# Slack
windowrule = opacity 0.9, match:class ^Slack$
# Secure shell
windowrule = border_color rgb(ff5f8f) rgb(882f4a), match:class ^secure_shell$
windowrule = border_size 8, match:class ^secure_shell$
# Obsidian
windowrule = opacity 0.8, match:class ^obsidian$
# Yazi on kitty
windowrule = opacity 0.92 0.92, match:class ^yazi-term$
windowrule = rounding 8, match:class ^yazi-term$
windowrule = animation slide, match:class ^yazi-term$
# Zen Apps
windowrule = opacity 1, match:initial_title ^.*perplexity\.ai_/.*$
windowrule = opacity 0.8, match:initial_title ^.*chat\.openai\.com_/.*$

# Pinned windows should be fully opaque
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:pin 1

# Identify qutebrowser profiles
windowrule = border_size 8, match:title ^.*\[qute-rash\].*$
windowrule = border_size 8, match:title ^.*\[qute-jobhunt\].*$
windowrule = border_color rgb(7aa2f7), match:title ^.*\[qute-rash\].*$
windowrule = border_color rgb(9ece6a), match:title ^.*\[qute-jobhunt\].*$

