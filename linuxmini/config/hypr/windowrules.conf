## Lock prevention

## Filtering tags
windowrule = tag +floating, match:float 1
windowrule = tag -floating, match:float 0
windowrule = tag +pinned, match:pin 1
windowrule = tag -pinned, match:pin 0
windowrule = tag +focused, match:focus 1
windowrule = tag -focused, match:focus 0
windowrule = tag +unfocused, match:focus 0
windowrule = tag -unfocused, match:focus 1

# Prevent lock when watching fullscreen
windowrule = idle_inhibit fullscreen, match:class .*
# Prevent lock when watching mpv/vlc in fullscreen or when doubled (large-video tag)
windowrule = idle_inhibit fullscreen, match:class .*(mpv|vlc).*
windowrule = idle_inhibit always, match:tag large-video
# Prevent lock when in a meeting (Slack huddles only, not all of Slack)
windowrule = idle_inhibit always, match:title .* - Huddle$
# Prevent apps from hijacking workspace
windowrule = suppress_event maximize, match:class ^Mullvad Browser$
windowrule = suppress_event maximize, match:class ^libreoffice-.*

# Fullscreen windows should be fully opaque
windowrule = opacity 1.0, match:fullscreen 1

# Pinned windows have yellow when focused, red when unfocused (gradient broken in Hyprland)
# TODO: After Hyprland fixes inactiveBorderGradient.updateColorsOk() bug, use:
#       windowrule = border_color rgb(ffff00) 0deg rgb(0000ff) rgb(ff0000) 45deg, match:pin 1
windowrule = border_color 1 rgb(ffff00) rgb(ff0000), match:pin 1
windowrule = border_size 6,match:pin 1

# Sneaky windows
windowrule = border_color 1 rgb(ffff00) rgb(d5a6ff), match:tag sneaky

# Noscreenshare for sentitive apps
windowrule = no_screen_share on, match:class ^Mullvad Browser$
windowrule = no_screen_share on, match:class ^secure_shell$

## Picture-in-picture - Browser
windowrule = float on, match:title ^.*Picture.in.picture.*$
windowrule = pin on, match:title ^.*Picture.in.picture.*$
windowrule = size 1280 720, match:title ^.*Picture.in.picture.*$
windowrule = move 100% 100%, match:title ^.*Picture.in.picture.*$
windowrule = keep_aspect_ratio on, match:title ^.*Picture.in.picture.*$

## Picture-in-picture - IPTV
windowrule = float on, match:class ^rofi_xtream$
windowrule = pin on, match:class ^rofi_xtream$
windowrule = size 1280 720, match:class ^rofi_xtream$
windowrule = move 100% 100%, match:class ^rofi_xtream$
windowrule = keep_aspect_ratio on, match:class ^rofi_xtream$

## Picture-in-picture - Jellyfin-mpv
windowrule = float on, match:class ^jellyfin-mpv$
windowrule = pin on, match:class ^jellyfin-mpv$
windowrule = size 1280 720, match:class ^jellyfin-mpv$
windowrule = move 100% 100%, match:class ^jellyfin-mpv$
windowrule = keep_aspect_ratio on, match:class ^jellyfin-mpv$

## Picture-in-picture - SVT Play
windowrule = float on, match:class ^mpv-svtplay$
windowrule = pin on, match:class ^mpv-svtplay$
windowrule = size 1280 720, match:class ^mpv-svtplay$
windowrule = move 100% 100%, match:class ^mpv-svtplay$
windowrule = keep_aspect_ratio on, match:class ^mpv-svtplay$

## Picture-in-picture - IPTV
windowrule = float on, match:title ^IPTV - .*$
windowrule = pin on, match:title ^IPTV - .*$
windowrule = size 1280 720, match:title ^IPTV - .*$
windowrule = move 100% 100%, match:title ^IPTV - .*$
windowrule = keep_aspect_ratio on, match:title ^IPTV - .*$

## Picture-in-picture - YouTube
windowrule = float on, match:title ^rofi_ytsearch.*$
windowrule = pin on, match:title ^rofi_ytsearch.*$
windowrule = size 1280 720, match:title ^rofi_ytsearch.*$
windowrule = move 100% 100%, match:title ^rofi_ytsearch.*$
windowrule = keep_aspect_ratio on, match:title ^rofi_ytsearch.*$

## TikTok
windowrule = float on, match:class ^.*tiktok.*$
windowrule = pin on, match:title ^.*tiktok.*$
windowrule = size 720 1160, match:title ^.*tiktok.*$
windowrule = move 100% 100%, match:title ^.*tiktok.*$
windowrule = keep_aspect_ratio on, match:title ^.*tiktok.*$

## App-specific window rules
# Libreoffice (prevent fullscreen)
windowrule = tile on, match:class ^libreoffice-.*$
# Slack
windowrule = opacity 0.9, match:class ^Slack$
# Secure shell
windowrule = border_color rgb(ff5f8f) rgb(882f4a), match:class ^secure_shell$
windowrule = border_size 8, match:class ^secure_shell$
# Obsidian
windowrule = opacity 0.8, match:class ^obsidian$
# Yazi on kitty
windowrule = opacity 0.92 0.92, match:class ^yazi-term$
windowrule = rounding 8, match:class ^yazi-term$
windowrule = animation slide, match:class ^yazi-term$
# Zen Apps
windowrule = opacity 0.8 override 0.8 override 1.0 override, match:class ^.*chrome.*$
windowrule = opacity 0.8, match:initial_title ^.*perplexity\.ai_/.*$
windowrule = opacity 0.8, match:initial_title ^.*chat\.openai\.com_/.*$

# Pinned windows should be fully opaque (must come after app-specific opacity rules)
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:pin 1

# Extensions
windowrule = float on, match:initial_title ^fdjamakpfbbddfjaooikfcpapjohcfmg_/popup/index.html$
windowrule = pin on, match:initial_title ^fdjamakpfbbddfjaooikfcpapjohcfmg_/popup/index.html$
windowrule = size 550 850, match:initial_title ^fdjamakpfbbddfjaooikfcpapjohcfmg_/popup/index.html$
windowrule = move 100% 100%, match:initial_title ^fdjamakpfbbddfjaooikfcpapjohcfmg_/popup/index.html$
windowrule = keep_aspect_ratio on, match:initial_title ^fdjamakpfbbddfjaooikfcpapjohcfmg_/popup/index.html$

# Identify qutebrowser profiles
windowrule = border_size 8, match:title ^.*\[qute-rash\].*$
windowrule = border_size 8, match:title ^.*\[qute-company\].*$
windowrule = border_color rgb(7aa2f7), match:title ^.*\[qute-rash\].*$
windowrule = border_color rgb(bb9af7), match:title ^.*\[qute-company\].*$

