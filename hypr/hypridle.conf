general {
    lock_cmd = bash -c 'pidof hyprlock || hyprlock'
    after_sleep_cmd = hyprctl dispatch dpms on
    ignore_dbus_inhibit = false
}

# Report inactive status to Home Assistant after 60 seconds
listener {
    timeout = 60
    on-timeout = ~/.config/scripts/hyprland/idle_management/activity_status_reporter.py --inactive
    on-resume = ~/.config/scripts/hyprland/idle_management/idle_simple_resume.py
}

# Lock screen after 5 minutes of inactivity
listener {
    timeout = 300
    on-timeout = bash -c 'pidof hyprlock || hyprlock'
}

# Turn off displays 30 seconds after locking
listener {
    timeout = 330
    on-timeout = bash -c 'pidof hyprlock && hyprctl dispatch dpms off'
}

# Keep the long-term listeners as they are
listener {
    timeout = 21600    # 6 hours in seconds
    on-timeout = fish -c 'eval (/home/rash/.config/scripts/shell/secure_env_secrets.py); /home/rash/.local/bin/cjar feast done; ~/.config/scripts/shell/switch_buku.py rash'
}

